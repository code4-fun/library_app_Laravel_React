**[Demo](http://84.38.180.229:86)**

**Учетные данные для входа в систему**

Суперпользователь

логин: `admin@domain.com`  
пароль: 1

Сотрудник

логин: `user@mail.com`  
пароль: 1

## Используемые технологии

- Laravel

- jQuery

- Bootstrap

- Docker

## Реализовано

- При первоначальной загрузке (seed) создается суперпользователь (логин: admin@domain.com; пароль: 1), который может создавать сотрудников (меню Действия -> Добавить сотрудника). Роль суперпользователя - 0. У создаваемых сотрудников роль - 1. Сотрудники могут создавать/удалять/редактировать книги и категории, также могут загружать книги из .xlsx-файла.

- Авторизация для сотрудников. Созданные суперпользователем сотрудники получают email с логином и паролем, после чего могут входить в систему со своими правами.

- Регистрация читателей. Читатели регистрируются, после чего могут просматривать книги, выполнять поиск, фильтрацию по категориям.

- CRUD для книг, категорий, сотрудников.

- Просмотр книг.

- Пагинация.

- Загрузка обложек книг. Сохраняются в /storage/app/public/cover

- Первоначальная загрузка данных (seeding).

- email уведомление сотрудников при их создании суперпользователем (сотруднику отправляется email с логином и паролем).

- Загрузка книг из .xlsx-файла по 100 записей в job-е (меню Действия -> Импортировать книги). Загрузка книг доступна суперпользователю и сотрудникам.

## Запуск проекта

Переименовать файл **.env.example** в **.env**.

Для отправки почты нужно зарегистрировать приложение на каком-либо почтовом сервисе (в файле **.env** настройки для mail.ru), получить [пароль для внешних приложений](https://help.mail.ru/mail/security/protection/external) и добавить его в параметр `MAIL_PASSWORD` в файле **.env**. В параметрах `MAIL_USERNAME` и `MAIL_FROM_ADDRESS` указать свой email.

### Локально

Требуется PHP версии >= 8.1 с установленным zip extension, Composer.

- Перед запуском приложения необходимо создать базу данных MySQL с именем **library**, пользователем **root** без пароля

- Клонировать проект

  `git clone git@github.com:ignal1/library-laravel.git`

- В файле **.env** раскомментировать следующие настройки для БД

    ```
    DB_CONNECTION=mysql
    DB_HOST=127.0.0.1
    DB_PORT=3306
    DB_DATABASE=library
    DB_USERNAME=root
    DB_PASSWORD=
    ```

- В Bash выполнить команды

  `composer install`

  `php artisan migrate:fresh --seed`

  `php artisan storage:link`

  `php artisan queue:work`

  `php artisan serve`

  после чего приложение будет доступно на *http://localhost:8000*

### Docker

- В файле **.env** раскомментировать следующие настройки для БД

    ```
    DB_CONNECTION=mysql
    DB_HOST=127.0.0.1
    DB_PORT=33061
    DB_DATABASE=app
    DB_USERNAME=app
    DB_PASSWORD=secret
    ```
  
- В файле **script.js** на строке 44 изменить *127.0.0.1:8000* на *localhost:8080*
  
- Перейти в директорию проекта и выполнить команды:

  `composer install`

  `docker-compose up -d`

  `docker-compose exec php-cli php artisan migrate:fresh --seed`
  
  `docker-compose exec php-cli php artisan storage:link`
  
  `docker-compose exec php-cli php artisan queue:work`

  после чего приложение будет доступно на *http://localhost:8080*


